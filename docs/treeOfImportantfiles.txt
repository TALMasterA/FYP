// Generated by AI
// Last Updated: 2026-03-01
// RESTRUCTURED: Root-level nav files, core utilities, and model strings reorganized
// REVIEWED: Full codebase scan — added docs/, startup screen, and missing test files
// UPDATED: Added accessibility, extensions, security expansion, database utils, and 5 new test files (59 total)

FYP/
├── README.md
├── .gitignore
├── settings.gradle.kts
├── build.gradle.kts
├── gradle.properties
├── local.properties
├── gradlew / gradlew.bat
├── gradle/
│   ├── gradle-daemon-jvm.properties
│   ├── libs.versions.toml
│   └── wrapper/
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
│
├── design/
│   └── App_Icon_SPictureDesign.pen                 ← App icon (512x512) & splash screen (1080x1920) designs
│
├── docs/
│   ├── treeOfImportantfiles.txt                    ← This file
│   ├── ARCHITECTURE_NOTES.md                       ← Critical business logic & invariants (13 sections)
│   ├── APP_SUGGESTIONS.md                          ← Implemented improvements & recommendations
│   └── LEAKCANARY_EXPLANATION.md                   ← Memory leak analysis
│
├── app/
│   ├── build.gradle.kts
│   ├── proguard-rules.pro
│   ├── google-services.json
│   └── src/
│       ├── main/
│       │   ├── AndroidManifest.xml
│       │   ├── assets/
│       │   │   └── azure_languages.json
│       │   └── java/com/example/fyp/
│       │       ├── navigation/                          ← Navigation routes & composables
│       │       │   ├── AppNavigation.kt                 ← composable nav graph
│       │       │   ├── AppScreens.kt                    ← AppScreen sealed class (all route destinations)
│       │       │   ├── MainFeatureGraph.kt              ← Home, speech, history, favorites sub-graph
│       │       │   ├── LearningWordBankGraph.kt         ← Learning, quiz, word bank sub-graph
│       │       │   ├── FriendsChatGraph.kt              ← Friends, chat, shared inbox sub-graph
│       │       │   ├── SettingsProfileGraph.kt          ← Settings, profile, shop sub-graph
│       │       │   └── StartupAuthGraph.kt              ← Startup, login, onboarding sub-graph
│       │       │
│       │       ├── appstate/                            ← App-level state & lifecycle
│       │       │   ├── AppViewModel.kt                  ← app-wide state & notifications
│       │       │   ├── FYPApplication.kt                ← Firebase init & DI config
│       │       │   └── MainActivity.kt                  ← Activity entry point
│       │       │
│       │       ├── utils/
│       │       │   └── ErrorMessageMapper.kt
│       │       │
│       │       ├── core/                                ← Organized into focused sub-groups
│       │       │   ├── foundation/                      ← Basic utilities & logger
│       │       │   │   ├── Logger.kt
│       │       │   │   ├── Constants.kt
│       │       │   │   └── ViewModelHelpers.kt
│       │       │   │
│       │       │   ├── permissions/                     ← Permission handling & gating
│       │       │   │   ├── CameraPermissions.kt
│       │       │   │   ├── PermissionUi.kt
│       │       │   │   └── RequireLoginGate.kt
│       │       │   │
│       │       │   ├── connectivity/                    ← Network state & retry logic
│       │       │   │   ├── ConnectivityObserver.kt
│       │       │   │   └── NetworkRetry.kt
│       │       │   │
│       │       │   ├── media/                           ← Audio & haptics
│       │       │   │   ├── AudioRecorder.kt
│       │       │   │   └── HapticFeedback.kt
│       │       │   │
│       │       │   ├── localization/                    ← Language state management
│       │       │   │   └── LocalAppLanguage.kt
│       │       │   │
│       │       │   ├── ui/                              ← UI utilities & composables
│       │       │   │   ├── CommonUi.kt
│       │       │   │   ├── FontSizeUtils.kt
│       │       │   │   └── Pagination.kt
│       │       │   │
│       │       │   ├── notifications/                   ← FCM & push notifications
│       │       │   │   └── FcmNotificationService.kt
│       │       │   │
│       │       │   ├── performance/                     ← Performance optimization utilities
│       │       │   │   └── PerformanceUtils.kt          ← Debouncing, throttling, memoization, batching
│       │       │   │
│       │       │   ├── security/                        ← Security validation & hardening
│       │       │   │   ├── SecurityUtils.kt             ← Input validation, sanitization, rate limiting
│       │       │   │   ├── AuditLogger.kt               ← Security event logging (login, rate-limit, etc.)
│       │       │   │   ├── CertificatePinning.kt        ← HTTPS certificate pinning for OkHttp
│       │       │   │   └── SecureStorage.kt             ← Android Keystore-backed encrypted SharedPrefs
│       │       │   │
│       │       │   ├── accessibility/                   ← Accessibility helpers
│       │       │   │   └── AccessibilityUtils.kt        ← Semantic modifiers & screen-reader helpers
│       │       │   │
│       │       │   ├── extensions/                      ← Kotlin extension functions
│       │       │   │   └── ExtensionFunctions.kt        ← String, Modifier, List extensions
│       │       │   │
│       │       │   └── navigation/                      ← Navigation helpers
│       │       │       └── NavigationHelpers.kt
│       │       │
│       │       ├── data/
│       │       │   ├── azure/
│       │       │   │   ├── AzureLanguageConfig.kt
│       │       │   │   ├── AzureSpeechProvider.kt
│       │       │   │   └── AzureVoiceConfig.kt
│       │       │   ├── clients/
│       │       │   │   ├── CloudSpeechTokenClient.kt
│       │       │   │   └── CloudTranslatorClient.kt
│       │       │   ├── cloud/
│       │       │   │   ├── CloudGenAiClient.kt
│       │       │   │   ├── CloudQuizClient.kt
│       │       │   │   ├── LanguageDetectionCache.kt
│       │       │   │   └── TranslationCache.kt
│       │       │   ├── di/
│       │       │   │   ├── DaggerModule.kt
│       │       │   │   └── SettingsModule.kt
│       │       │   ├── feedback/
│       │       │   │   └── FirestoreFeedbackRepository.kt
│       │       │   ├── friends/
│       │       │   │   ├── ChatRepository.kt
│       │       │   │   ├── FirestoreChatRepository.kt
│       │       │   │   ├── FirestoreFriendsRepository.kt
│       │       │   │   ├── FirestoreSharingRepository.kt
│       │       │   │   ├── FriendsRepository.kt
│       │       │   │   ├── SharedFriendsDataSource.kt
│       │       │   │   └── SharingRepository.kt
│       │       │   ├── history/
│       │       │   │   ├── FirestoreHistoryRepository.kt
│       │       │   │   └── SharedHistoryDataSource.kt
│       │       │   ├── image/
│       │       │   │   └── ImageLoadingModule.kt
│       │       │   ├── learning/
│       │       │   │   ├── ContentCleaner.kt
│       │       │   │   ├── FirestoreLearningSheetsRepository.kt
│       │       │   │   ├── FirestoreQuizRepository.kt
│       │       │   │   ├── LearningContentRepositoryImpl.kt
│       │       │   │   ├── QuizGenerationRepositoryImpl.kt
│       │       │   │   └── QuizParser.kt
│       │       │   ├── network/
│       │       │   │   └── CacheInterceptor.kt
│       │       │   ├── ocr/
│       │       │   │   └── MLKitOcrRepository.kt
│       │       │   ├── repositories/
│       │       │   │   ├── AzureSpeechRepository.kt
│       │       │   │   ├── FirebaseTranslationRepository.kt
│       │       │   │   ├── SpeechRepository.kt
│       │       │   │   └── TranslationRepository.kt
│       │       │   ├── settings/
│       │       │   │   ├── FirestoreUserSettingsRepository.kt
│       │       │   │   ├── SharedSettingsDataSource.kt
│       │       │   │   └── UserSettingsRepository.kt
│       │       │   ├── ui/
│       │       │   │   ├── UiLanguageCacheStore.kt
│       │       │   │   └── UiLanguageStateController.kt
│       │       │   ├── user/
│       │       │   │   ├── FirebaseAuthRepository.kt
│       │       │   │   ├── FirestoreFavoritesRepository.kt
│       │       │   │   └── FirestoreProfileRepository.kt
│       │       │   ├── wordbank/
│       │       │   │   ├── FirestoreCustomWordsRepository.kt
│       │       │   │   ├── FirestoreWordBankRepository.kt
│       │       │   │   ├── WordBankCacheDataStore.kt
│       │       │   │   └── WordBankGenerationRepository.kt
│       │       │   └── database/                        ← Database utilities
│       │       │       ├── DatabaseUtils.kt              ← Batch write/delete/set/update helpers
│       │       │       └── DataCleanupUtils.kt           ← Old doc deletion, archive, orphan cleanup
│       │       │
│       │       ├── domain/
│       │       │   ├── auth/
│       │       │   │   └── LoginUseCase.kt
│       │       │   ├── feedback/
│       │       │   │   └── FeedbackRepository.kt
│       │       │   ├── friends/
│       │       │   │   ├── AcceptFriendRequestUseCase.kt
│       │       │   │   ├── AcceptSharedItemUseCase.kt
│       │       │   │   ├── CancelFriendRequestUseCase.kt
│       │       │   │   ├── DismissSharedItemUseCase.kt
│       │       │   │   ├── EnsurePublicProfileExistsUseCase.kt
│       │       │   │   ├── GetCurrentUserProfileUseCase.kt
│       │       │   │   ├── MarkMessagesAsReadUseCase.kt
│       │       │   │   ├── ObserveFriendsUseCase.kt
│       │       │   │   ├── ObserveIncomingRequestsUseCase.kt
│       │       │   │   ├── ObserveMessagesUseCase.kt
│       │       │   │   ├── ObserveOutgoingRequestsUseCase.kt
│       │       │   │   ├── ObserveSharedInboxUseCase.kt
│       │       │   │   ├── ObserveUnreadCountUseCase.kt
│       │       │   │   ├── RejectFriendRequestUseCase.kt
│       │       │   │   ├── RemoveFriendUseCase.kt
│       │       │   │   ├── SearchUsersUseCase.kt
│       │       │   │   ├── SendFriendRequestUseCase.kt
│       │       │   │   ├── SendMessageUseCase.kt
│       │       │   │   ├── ShareLearningMaterialUseCase.kt
│       │       │   │   ├── ShareWordUseCase.kt
│       │       │   │   └── TranslateAllMessagesUseCase.kt
│       │       │   ├── history/
│       │       │   │   ├── DeleteHistoryRecordUseCase.kt
│       │       │   │   ├── DeleteSessionUseCase.kt
│       │       │   │   ├── HistoryRepository.kt
│       │       │   │   ├── ObserveSessionNamesUseCase.kt
│       │       │   │   ├── ObserveUserHistoryUseCase.kt
│       │       │   │   ├── RenameSessionUseCase.kt
│       │       │   │   └── SaveTranslationUseCase.kt
│       │       │   ├── learning/
│       │       │   │   ├── CoinEligibility.kt
│       │       │   │   ├── GenerateLearningMaterialsUseCase.kt
│       │       │   │   ├── GenerateQuizUseCase.kt
│       │       │   │   ├── GenerationEligibility.kt
│       │       │   │   ├── LearningContentRepository.kt
│       │       │   │   ├── LearningSheetsRepository.kt
│       │       │   │   ├── ParseAndStoreQuizUseCase.kt
│       │       │   │   ├── QuizGenerationRepository.kt
│       │       │   │   └── QuizRepository.kt
│       │       │   ├── ocr/
│       │       │   │   └── RecognizeTextFromImageUseCase.kt
│       │       │   ├── settings/
│       │       │   │   ├── ObserveUserSettingsUseCase.kt
│       │       │   │   ├── SetAutoThemeEnabledUseCase.kt
│       │       │   │   ├── SetColorPaletteUseCase.kt
│       │       │   │   ├── SetFontSizeScaleUseCase.kt
│       │       │   │   ├── SetNotificationPrefUseCase.kt
│       │       │   │   ├── SetPrimaryLanguageUseCase.kt
│       │       │   │   ├── SetThemeModeUseCase.kt
│       │       │   │   ├── SetVoiceForLanguageUseCase.kt
│       │       │   │   ├── UnlockColorPaletteUseCase.kt
│       │       │   │   └── UnlockColorPaletteWithCoinsUseCase.kt
│       │       │   └── speech/
│       │       │       ├── DetectLanguageUseCase.kt
│       │       │       ├── RecognizeFromMicUseCase.kt
│       │       │       ├── RecognizeWithAutoDetectUseCase.kt
│       │       │       ├── SpeakTextUseCase.kt
│       │       │       ├── StartContinuousConversationUseCase.kt
│       │       │       ├── TranslateBatchUseCase.kt
│       │       │       └── TranslateTextUseCase.kt
│       │       │
│       │       ├── model/
│       │       │   ├── friends/
│       │       │   │   ├── FriendMessage.kt
│       │       │   │   ├── FriendRelation.kt
│       │       │   │   ├── FriendRequest.kt
│       │       │   │   ├── PublicUserProfile.kt
│       │       │   │   └── SharedItem.kt
│       │       │   ├── ui/
│       │       │   │   ├── AppLanguageState.kt
│       │       │   │   ├── strings/                      ← Localized UI text definitions
│       │       │   │   │   ├── UiTextCore.kt            ← UiTextKey enum + BaseUiTexts list
│       │       │   │   │   ├── UiTextScreens.kt         ← English base UI strings list
│       │       │   │   │   ├── UiTextHelpers.kt         ← helper fns (language names, etc.)
│       │       │   │   │   └── translations/            ← Language-specific implementations
│       │       │   │   │       ├── CantoneseUiTexts.kt  ← hardcoded zh-HK UI strings
│       │       │   │   │       └── ZhTwUiTexts.kt       ← hardcoded zh-TW UI strings
│       │       │   ├── user/
│       │       │   │   ├── AuthState.kt
│       │       │   │   ├── User.kt
│       │       │   │   ├── UserProfile.kt
│       │       │   │   └── UserSettings.kt
│       │       │   ├── CustomWord.kt
│       │       │   ├── FavoriteRecord.kt
│       │       │   ├── HistorySession.kt
│       │       │   ├── OcrResult.kt
│       │       │   ├── Quiz.kt
│       │       │   ├── SpeechResult.kt
│       │       │   ├── TranslationRecord.kt
│       │       │   └── ValueTypes.kt
│       │       │
│       │       ├── screens/
│       │       │   ├── favorites/
│       │       │   │   ├── FavoritesScreen.kt
│       │       │   │   └── FavoritesViewModel.kt
│       │       │   ├── feedback/
│       │       │   │   ├── FeedbackScreen.kt
│       │       │   │   └── FeedbackViewModel.kt
│       │       │   ├── friends/
│       │       │   │   ├── BlockedUsersScreen.kt
│       │       │   │   ├── ChatScreen.kt
│       │       │   │   ├── ChatViewModel.kt
│       │       │   │   ├── FriendsScreen.kt
│       │       │   │   ├── FriendsViewModel.kt
│       │       │   │   ├── MyProfileScreen.kt
│       │       │   │   ├── MyProfileViewModel.kt
│       │       │   │   ├── SharedInboxScreen.kt
│       │       │   │   ├── SharedInboxViewModel.kt
│       │       │   │   ├── SharedMaterialDetailScreen.kt
│       │       │   │   └── SharedMaterialDetailViewModel.kt
│       │       │   ├── help/
│       │       │   │   └── HelpScreen.kt
│       │       │   ├── history/
│       │       │   │   ├── CoinRulesDialog.kt
│       │       │   │   ├── HistoryContinuousSessionBubbles.kt
│       │       │   │   ├── HistoryContinuousTab.kt
│       │       │   │   ├── HistoryDialogs.kt
│       │       │   │   ├── HistoryDiscreteTab.kt
│       │       │   │   ├── HistoryScreen.kt
│       │       │   │   ├── HistorySessionGrouping.kt
│       │       │   │   └── HistoryViewModel.kt
│       │       │   ├── home/
│       │       │   │   └── HomeScreen.kt
│       │       │   ├── onboarding/
│       │       │   │   └── OnboardingScreen.kt
│       │       │   ├── learning/
│       │       │   │   ├── LearningModels.kt
│       │       │   │   ├── LearningScreen.kt
│       │       │   │   ├── LearningSheetScreen.kt
│       │       │   │   ├── LearningSheetViewModel.kt
│       │       │   │   ├── LearningViewModel.kt
│       │       │   │   ├── QuizDialogs.kt
│       │       │   │   ├── QuizRegenerateButton.kt
│       │       │   │   ├── QuizResultsScreen.kt
│       │       │   │   ├── QuizScreen.kt
│       │       │   │   └── QuizTakingScreen.kt
│       │       │   ├── login/
│       │       │   │   ├── AuthViewModel.kt
│       │       │   │   ├── LoginScreen.kt
│       │       │   │   └── ResetPasswordScreen.kt
│       │       │   ├── settings/
│       │       │   │   ├── ColorPaletteSelector.kt
│       │       │   │   ├── NotificationSettingsScreen.kt
│       │       │   │   ├── ProfileScreen.kt
│       │       │   │   ├── ProfileViewModel.kt
│       │       │   │   ├── SettingsScreen.kt
│       │       │   │   ├── SettingsViewModel.kt
│       │       │   │   ├── ShopScreen.kt
│       │       │   │   ├── ShopViewModel.kt
│       │       │   │   ├── VoiceSettingsScreen.kt
│       │       │   │   └── VoiceSettingsSelector.kt
│       │       │   ├── speech/
│       │       │   │   ├── ContinuousConversationComponents.kt
│       │       │   │   ├── ContinuousConversationController.kt
│       │       │   │   ├── ContinuousConversationEffects.kt
│       │       │   │   ├── ContinuousConversationScreen.kt
│       │       │   │   ├── ImageCaptureComponents.kt
│       │       │   │   ├── SpeechModels.kt
│       │       │   │   ├── SpeechRecognitionComponents.kt
│       │       │   │   ├── SpeechRecognitionScreen.kt
│       │       │   │   ├── SpeechViewModel.kt
│       │       │   │   └── TtsController.kt
│       │       │   ├── startup/
│       │       │   │   └── StartupScreen.kt
│       │       │   └── wordbank/
│       │       │       ├── AddCustomWordDialog.kt
│       │       │       ├── CustomWordBankView.kt
│       │       │       ├── CustomWordsViewModel.kt
│       │       │       ├── WordBankDetailView.kt
│       │       │       ├── WordBankItemCard.kt
│       │       │       ├── WordBankLanguageSelection.kt
│       │       │       ├── WordBankModels.kt
│       │       │       ├── WordBankScreen.kt
│       │       │       └── WordBankViewModel.kt
│       │       │
│       │       └── ui/
│       │           ├── components/
│       │           │   ├── AnimatedComponents.kt
│       │           │   ├── EmptyStateView.kt
│       │           │   ├── FriendSelectorDialog.kt
│       │           │   ├── LoadingSkeletons.kt
│       │           │   ├── StandardComponents.kt           ← Cards, empty states, error cards
│       │           │   ├── StandardButtons.kt              ← Standardized button components
│       │           │   ├── StandardTextFields.kt           ← Standardized text field components
│       │           │   └── StandardDialogs.kt              ← Standardized dialog components
│       │           └── theme/
│       │               ├── Color.kt
│       │               ├── ColorPalette.kt
│       │               ├── Dimens.kt
│       │               ├── Theme.kt
│       │               ├── ThemeHelper.kt
│       │               └── Type.kt
│       │
│       └── test/java/com/example/fyp/
│           ├── core/
│           │   ├── PaginationTest.kt
│           │   ├── performance/
│           │   │   └── PerformanceUtilsTest.kt              ← Debounce, throttle, cache tests
│           │   └── security/
│           │       └── SecurityUtilsTest.kt                 ← Validation & sanitization tests
│           ├── data/
│           │   ├── azure/
│           │   │   └── LanguageDisplayNamesTest.kt
│           │   ├── friends/
│           │   │   └── FirestoreChatRepositoryTest.kt       ← Chat repository integration test
│           │   ├── learning/
│           │   │   ├── CoinEligibilityTest.kt
│           │   │   ├── ContentCleanerTest.kt
│           │   │   └── QuizParserTest.kt
│           │   └── repositories/
│           │       └── FirebaseTranslationRepositoryTest.kt
│           ├── domain/
│           │   ├── auth/
│           │   │   └── LoginUseCaseTest.kt
│           │   ├── friends/
│           │   │   ├── AcceptFriendRequestUseCaseTest.kt
│           │   │   ├── AcceptSharedItemUseCaseTest.kt
│           │   │   ├── CancelFriendRequestUseCaseTest.kt
│           │   │   ├── DismissSharedItemUseCaseTest.kt
│           │   │   ├── EnsurePublicProfileExistsUseCaseTest.kt
│           │   │   ├── GetCurrentUserProfileUseCaseTest.kt
│           │   │   ├── MarkMessagesAsReadUseCaseTest.kt
│           │   │   ├── ObserveUnreadCountUseCaseTest.kt
│           │   │   ├── RejectFriendRequestUseCaseTest.kt
│           │   │   ├── RemoveFriendUseCaseTest.kt
│           │   │   ├── SearchUsersUseCaseTest.kt
│           │   │   ├── SendFriendRequestUseCaseTest.kt
│           │   │   ├── SendMessageUseCaseTest.kt
│           │   │   └── ShareWordUseCaseTest.kt
│           │   ├── history/
│           │   │   └── SaveTranslationUseCaseTest.kt
│           │   ├── learning/
│           │   │   ├── CoinAndGenerationIntegrationTest.kt
│           │   │   └── GenerationEligibilityTest.kt
│           │   ├── ocr/
│           │   │   └── RecognizeTextFromImageUseCaseTest.kt
│           │   ├── settings/
│           │   │   └── UnlockColorPaletteWithCoinsUseCaseTest.kt
│           │   ├── speech/
│           │   │   ├── DetectLanguageUseCaseTest.kt
│           │   │   ├── RecognizeFromMicUseCaseTest.kt
│           │   │   ├── SpeakTextUseCaseTest.kt
│           │   │   ├── TranslateBatchUseCaseTest.kt
│           │   │   └── TranslateTextUseCaseTest.kt
│           │   └── validation/
│           │       └── LanguageValidationTest.kt
│           ├── model/
│           │   ├── friends/
│           │   │   ├── ChatMetadataTest.kt
│           │   │   ├── FriendRelationTest.kt
│           │   │   ├── FriendRequestTest.kt
│           │   │   ├── PublicUserProfileTest.kt
│           │   │   └── SharedItemTest.kt
│           │   ├── ui/
│           │   │   └── UiTextAlignmentTest.kt
│           │   ├── user/
│           │   │   └── UserSettingsTest.kt
│           │   ├── FavoriteRecordTest.kt
│           │   ├── HistorySessionTest.kt
│           │   ├── OcrResultTest.kt
│           │   ├── QuizModelTest.kt
│           │   ├── SpeechResultTest.kt
│           │   ├── TranslationRecordTest.kt
│           │   └── ValueTypesTest.kt
│           ├── screens/
│           │   ├── favorites/
│           │   │   └── FavoritesViewModelTest.kt
│           │   ├── feedback/
│           │   │   └── FeedbackViewModelTest.kt
│           │   ├── friends/
│           │   │   └── SharedInboxViewModelTest.kt
│           │   ├── history/
│           │   │   ├── HistoryUiStateTest.kt
│           │   │   └── HistoryViewModelTest.kt
│           │   └── settings/
│           │       ├── ProfileViewModelTest.kt
│           │       └── ShopViewModelTest.kt
│           └── ui/
│               └── components/
│                   ├── StandardButtonsTest.kt               ← Button click/state tests
│                   ├── StandardDialogsTest.kt               ← Dialog display/dismiss tests
│                   └── StandardTextFieldsTest.kt            ← Input/validation toggle tests
│
└── fyp-backend/
    ├── firebase.json
    ├── firestore.rules
    ├── firestore.rules.safe
    ├── firestore.indexes.json
    ├── .firebaserc
    └── functions/
        ├── package.json
        ├── package-lock.json
        ├── tsconfig.json
        ├── tsconfig.dev.json
        ├── .eslintrc.js
        └── src/
            └── index.ts